/* XML for CocoonJS v0.9.0 - (c) 2014 Dan Cox. */

!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.domParser=b()}(this,function(){var a=function(){function a(a){var b={1:"INDEX_SIZE_ERR",2:"DOMSTRING_SIZE_ERR",3:"HIERARCHY_REQUEST_ERR",4:"WRONG_DOCUMENT_ERR",5:"INVALID_CHARACTER_ERR",6:"NO_DATA_ALLOWED_ERR",7:"NO_MODIFICATION_ALLOWED_ERR",8:"NOT_FOUND_ERR",9:"NOT_SUPPORTED_ERR",10:"INUSE_ATTRIBUTE_ERR",11:"INVALID_STATE_ERR",12:"SYNTAX_ERR",13:"INVALID_MODIFICATION_ERR",14:"NAMESPACE_ERR",15:"INVALID_ACCESS_ERR"},c={1:"Index or size is negative, or greater than the allowed value.",2:"The specified range of text does not fit into a DOMString.",3:"Node is inserted somewhere it does not belong.",4:"Node is used in a different document than the one that created it.",5:"Invalid or illegal character is specified, such as in a name.",6:"Data is specified for a node which does not support data.",7:"An attempt is made to modify an object where modifications are not allowed.",8:"An attempt is made to reference a node in a context where it does not exist.",9:"The implementation does not support the requested type of object or operation.",10:"An attempt is made to add an attribute that is already in use elsewhere.",11:"An attempt is made to use an object that is not, or is no longer, usable.",12:"An invalid or illegal string is specified.",13:"An attempt is made to modify the type of the underlying object.",14:"An attempt is made to create or change an object in a way which is incorrect with regard to namespaces.",15:"A parameter or an operation is not supported by the underlying object."};this.name=b[a],this.message=c[a]}function b(){this.length=0,this.nodes=[]}function c(){this.length=0,this.nodes=[],this.ownerDocument=null}function d(){this.nodeName="",this.nodeValue="",this.nodeType=0,this.parentNode=null,this.childNodes=new b,this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null,this.attributes=new c,this.ownerDocument=null,this.namespaceURI="",this.prefix="",this.localName=""}function e(a,b,c){this.name=a,this.value=b,this.ownerElement=c,this.attributes=null,this.specified=!0,this.nodeType=2}function f(a,b){this.data=a,this.name="#comment",this.attributes=null,this.parentNode=b,this.parentElement=1!==this.parentNode.nodeType?null:b,this.nodeType=8}function g(a,b){this.data=a,this.name="#text",this.attributes=null,this.parentNode=b,this.parentElement=1!==this.parentNode.nodeType?null:b,this.nodeType=3}function h(a,b){this.data=a,this.name="#cdata-section",this.attributes=null,this.parentNode=b,this.parentElement=1!==this.parentNode.nodeType?null:b,this.nodeType=4}function i(a,b,c){this.target=a,this.data=b,this.name=a,this.attributes=null,this.parentNode=c,this.parentElement=1!==this.parentNode.nodeType?null:c}function j(a){return this.nodeType=1,this.val="",this.children=[],this.firstChild=null,this.lastChild=null,a&&(a.hasOwnProperty("name")&&(this.name=a.name),a.hasOwnProperty("ownerDocument")&&(this.ownerDocument=a.ownerDocument),a.hasOwnProperty("parentNode")&&(this.parentNode=a.parentNode),a.hasOwnProperty("parentNode")&&null!==a.parentNode&&1===a.parentNode.nodeType&&(this.parentElement=a.parentNode),a.hasOwnProperty("nodeType")&&(this.nodeType=a.nodeType),a.hasOwnProperty("attributes")&&(this.attr=a.attributes)),this}function k(){this.name="",this.entities=new c,this.notations=new c,this.publicId="",this.systemId="",this.internalSubset="",d.call(this)}function l(){}function m(a){if(this.attributes=null,this.implementation=new l,a){a=a.toString().trim();var b=p.parser(!0,{xmlns:!0});b.onopentag=function(){o[0]._opentag.apply(o[0],arguments)},b.onclosetag=function(){o[0]._closetag.apply(o[0],arguments)},b.ontext=function(){o[0]._text.apply(o[0],arguments)},b.oncdata=function(){o[0]._cdata.apply(o[0],arguments)},b.oncomment=function(){o[0]._comment.apply(o[0],arguments)},o=[this],b.write(a)}}function n(){this.name="#document-fragment",this.nodeType=11,this.attributes=null,m.call(this)}var o=null,p=function(){function a(b,d){if(!(this instanceof a))return new a(b,d);var e=this;c(e),e.q=e.c="",e.bufferCheckPosition=y.MAX_BUFFER_LENGTH,e.opt=d||{},e.opt.lowercase=e.opt.lowercase||e.opt.lowercasetags,e.looseCase=e.opt.lowercase?"toLowerCase":"toUpperCase",e.tags=[],e.closed=e.closedRoot=e.sawRoot=!1,e.tag=e.error=null,e.strict=!!b,e.noscript=!(!b&&!e.opt.noscript),e.state=Q.BEGIN,e.ENTITIES=Object.create(y.ENTITIES),e.attribList=[],e.opt.xmlns&&(e.ns=Object.create(N)),e.trackPosition=e.opt.position!==!1,e.trackPosition&&(e.position=e.line=e.column=0),k(e,"onready")}function b(a){for(var b=Math.max(y.MAX_BUFFER_LENGTH,10),c=0,d=0,e=z.length;e>d;d++){var f=a[z[d]].length;if(f>b)switch(z[d]){case"textNode":m(a);break;case"cdata":l(a,"oncdata",a.cdata),a.cdata="";break;case"script":l(a,"onscript",a.script),a.script="";break;default:o(a,"Max buffer length exceeded: "+z[d])}c=Math.max(c,f)}a.bufferCheckPosition=y.MAX_BUFFER_LENGTH-c+a.position}function c(a){for(var b=0,c=z.length;c>b;b++)a[z[b]]=""}function d(a){m(a),""!==a.cdata&&(l(a,"oncdata",a.cdata),a.cdata=""),""!==a.script&&(l(a,"onscript",a.script),a.script="")}function e(a,b){return new f(a,b)}function f(b,c){if(!(this instanceof f))return new f(b,c);A.apply(this),this._parser=new a(b,c),this.writable=!0,this.readable=!0;var d=this;this._parser.onend=function(){d.emit("end")},this._parser.onerror=function(a){d.emit("error",a),d._parser.error=null},this._decoder=null,C.forEach(function(a){Object.defineProperty(d,"on"+a,{get:function(){return d._parser["on"+a]},set:function(b){return b?void d.on(a,b):(d.removeAllListeners(a),d._parser["on"+a]=b)},enumerable:!0,configurable:!1})})}function g(a){return a.split("").reduce(function(a,b){return a[b]=!0,a},{})}function h(a){return"[object RegExp]"===Object.prototype.toString.call(a)}function i(a,b){return h(a)?!!b.match(a):a[b]}function j(a,b){return!i(a,b)}function k(a,b,c){a[b]&&a[b](c)}function l(a,b,c){a.textNode&&m(a),k(a,b,c)}function m(a){a.textNode=n(a.opt,a.textNode),a.textNode&&k(a,"ontext",a.textNode),a.textNode=""}function n(a,b){return a.trim&&(b=b.trim()),a.normalize&&(b=b.replace(/\s+/g," ")),b}function o(a,b){return m(a),a.trackPosition&&(b+="\nLine: "+a.line+"\nColumn: "+a.column+"\nChar: "+a.c),b=new Error(b),a.error=b,k(a,"onerror",b),a}function p(b){return b.closedRoot||q(b,"Unclosed root tag"),b.state!==Q.BEGIN&&b.state!==Q.TEXT&&o(b,"Unexpected end"),m(b),b.c="",b.closed=!0,k(b,"onend"),a.call(b,b.strict,b.opt),b}function q(b,c){if("object"!=typeof b||!(b instanceof a))throw new Error("bad call to strictFail");b.strict&&o(b,c)}function r(a){a.strict||(a.tagName=a.tagName[a.looseCase]());var b=a.tags[a.tags.length-1]||a,c=a.tag={name:a.tagName,attributes:{}};a.opt.xmlns&&(c.ns=b.ns),a.attribList.length=0}function s(a,b){var c=a.indexOf(":"),d=0>c?["",a]:a.split(":"),e=d[0],f=d[1];return b&&"xmlns"===a&&(e="xmlns",f=""),{prefix:e,local:f}}function t(a){if(a.strict||(a.attribName=a.attribName[a.looseCase]()),-1!==a.attribList.indexOf(a.attribName)||a.tag.attributes.hasOwnProperty(a.attribName))return a.attribName=a.attribValue="";if(a.opt.xmlns){var b=s(a.attribName,!0),c=b.prefix,d=b.local;if("xmlns"===c)if("xml"===d&&a.attribValue!==L)q(a,"xml: prefix must be bound to "+L+"\nActual: "+a.attribValue);else if("xmlns"===d&&a.attribValue!==M)q(a,"xmlns: prefix must be bound to "+M+"\nActual: "+a.attribValue);else{var e=a.tag,f=a.tags[a.tags.length-1]||a;e.ns===f.ns&&(e.ns=Object.create(f.ns)),e.ns[d]=a.attribValue}a.attribList.push([a.attribName,a.attribValue])}else a.tag.attributes[a.attribName]=a.attribValue,l(a,"onattribute",{name:a.attribName,value:a.attribValue});a.attribName=a.attribValue=""}function u(a,b){if(a.opt.xmlns){var c=a.tag,d=s(a.tagName);c.prefix=d.prefix,c.local=d.local,c.uri=c.ns[d.prefix]||"",c.prefix&&!c.uri&&(q(a,"Unbound namespace prefix: "+JSON.stringify(a.tagName)),c.uri=d.prefix);var e=a.tags[a.tags.length-1]||a;c.ns&&e.ns!==c.ns&&Object.keys(c.ns).forEach(function(b){l(a,"onopennamespace",{prefix:b,uri:c.ns[b]})});for(var f=0,g=a.attribList.length;g>f;f++){var h=a.attribList[f],i=h[0],j=h[1],k=s(i,!0),m=k.prefix,n=k.local,o=""===m?"":c.ns[m]||"",p={name:i,value:j,prefix:m,local:n,uri:o};m&&"xmlns"!==m&&!o&&(q(a,"Unbound namespace prefix: "+JSON.stringify(m)),p.uri=m),a.tag.attributes[i]=p,l(a,"onattribute",p)}a.attribList.length=0}a.tag.isSelfClosing=!!b,a.sawRoot=!0,a.tags.push(a.tag),l(a,"onopentag",a.tag),b||(a.state=a.noscript||"script"!==a.tagName.toLowerCase()?Q.TEXT:Q.SCRIPT,a.tag=null,a.tagName=""),a.attribName=a.attribValue="",a.attribList.length=0}function v(a){if(!a.tagName)return q(a,"Weird empty close tag."),a.textNode+="</>",void(a.state=Q.TEXT);if(a.script){if("script"!==a.tagName)return a.script+="</"+a.tagName+">",a.tagName="",void(a.state=Q.SCRIPT);l(a,"onscript",a.script),a.script=""}var b=a.tags.length,c=a.tagName;a.strict||(c=c[a.looseCase]());for(var d=c;b--;){var e=a.tags[b];if(e.name===d)break;q(a,"Unexpected close tag")}if(0>b)return q(a,"Unmatched closing tag: "+a.tagName),a.textNode+="</"+a.tagName+">",void(a.state=Q.TEXT);a.tagName=c;for(var f=a.tags.length;f-->b;){var g=a.tag=a.tags.pop();a.tagName=a.tag.name,l(a,"onclosetag",a.tagName);var h={};for(var i in g.ns)h[i]=g.ns[i];var j=a.tags[a.tags.length-1]||a;a.opt.xmlns&&g.ns!==j.ns&&Object.keys(g.ns).forEach(function(b){var c=g.ns[b];l(a,"onclosenamespace",{prefix:b,uri:c})})}0===b&&(a.closedRoot=!0),a.tagName=a.attribValue=a.attribName="",a.attribList.length=0,a.state=Q.TEXT}function w(a){var b,c=a.entity,d=c.toLowerCase(),e="";return a.ENTITIES[c]?a.ENTITIES[c]:a.ENTITIES[d]?a.ENTITIES[d]:(c=d,"#"===c.charAt(0)&&("x"===c.charAt(1)?(c=c.slice(2),b=parseInt(c,16),e=b.toString(16)):(c=c.slice(1),b=parseInt(c,10),e=b.toString(10))),c=c.replace(/^0+/,""),e.toLowerCase()!==c?(q(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(b))}function x(a){var c=this;if(this.error)throw this.error;if(c.closed)return o(c,"Cannot write after close. Assign an onready handler.");if(null===a)return p(c);for(var d=0,e="";c.c=e=a.charAt(d++);)switch(c.trackPosition&&(c.position++,"\n"===e?(c.line++,c.column=0):c.column++),c.state){case Q.BEGIN:"<"===e?(c.state=Q.OPEN_WAKA,c.startTagPosition=c.position):j(D,e)&&(q(c,"Non-whitespace before first tag."),c.textNode=e,c.state=Q.TEXT);continue;case Q.TEXT:if(c.sawRoot&&!c.closedRoot){for(var f=d-1;e&&"<"!==e&&"&"!==e;)e=a.charAt(d++),e&&c.trackPosition&&(c.position++,"\n"===e?(c.line++,c.column=0):c.column++);c.textNode+=a.substring(f,d-1)}"<"===e?(c.state=Q.OPEN_WAKA,c.startTagPosition=c.position):(!j(D,e)||c.sawRoot&&!c.closedRoot||q(c,"Text data outside of root node."),"&"===e?c.state=Q.TEXT_ENTITY:c.textNode+=e);continue;case Q.SCRIPT:"<"===e?c.state=Q.SCRIPT_ENDING:c.script+=e;continue;case Q.SCRIPT_ENDING:"/"===e?c.state=Q.CLOSE_TAG:(c.script+="<"+e,c.state=Q.SCRIPT);continue;case Q.OPEN_WAKA:if("!"===e)c.state=Q.SGML_DECL,c.sgmlDecl="";else if(i(D,e));else if(i(O,e))c.state=Q.OPEN_TAG,c.tagName=e;else if("/"===e)c.state=Q.CLOSE_TAG,c.tagName="";else if("?"===e)c.state=Q.PROC_INST,c.procInstName=c.procInstBody="";else{if(q(c,"Unencoded <"),c.startTagPosition+1<c.position){var g=c.position-c.startTagPosition;e=new Array(g).join(" ")+e}c.textNode+="<"+e,c.state=Q.TEXT}continue;case Q.SGML_DECL:(c.sgmlDecl+e).toUpperCase()===J?(l(c,"onopencdata"),c.state=Q.CDATA,c.sgmlDecl="",c.cdata=""):c.sgmlDecl+e==="--"?(c.state=Q.COMMENT,c.comment="",c.sgmlDecl=""):(c.sgmlDecl+e).toUpperCase()===K?(c.state=Q.DOCTYPE,(c.doctype||c.sawRoot)&&q(c,"Inappropriately located doctype declaration"),c.doctype="",c.sgmlDecl=""):">"===e?(l(c,"onsgmldeclaration",c.sgmlDecl),c.sgmlDecl="",c.state=Q.TEXT):i(G,e)?(c.state=Q.SGML_DECL_QUOTED,c.sgmlDecl+=e):c.sgmlDecl+=e;continue;case Q.SGML_DECL_QUOTED:e===c.q&&(c.state=Q.SGML_DECL,c.q=""),c.sgmlDecl+=e;continue;case Q.DOCTYPE:">"===e?(c.state=Q.TEXT,l(c,"ondoctype",c.doctype),c.doctype=!0):(c.doctype+=e,"["===e?c.state=Q.DOCTYPE_DTD:i(G,e)&&(c.state=Q.DOCTYPE_QUOTED,c.q=e));continue;case Q.DOCTYPE_QUOTED:c.doctype+=e,e===c.q&&(c.q="",c.state=Q.DOCTYPE);continue;case Q.DOCTYPE_DTD:c.doctype+=e,"]"===e?c.state=Q.DOCTYPE:i(G,e)&&(c.state=Q.DOCTYPE_DTD_QUOTED,c.q=e);continue;case Q.DOCTYPE_DTD_QUOTED:c.doctype+=e,e===c.q&&(c.state=Q.DOCTYPE_DTD,c.q="");continue;case Q.COMMENT:"-"===e?c.state=Q.COMMENT_ENDING:c.comment+=e;continue;case Q.COMMENT_ENDING:"-"===e?(c.state=Q.COMMENT_ENDED,c.comment=n(c.opt,c.comment),c.comment&&l(c,"oncomment",c.comment),c.comment=""):(c.comment+="-"+e,c.state=Q.COMMENT);continue;case Q.COMMENT_ENDED:">"!==e?(q(c,"Malformed comment"),c.comment+="--"+e,c.state=Q.COMMENT):c.state=Q.TEXT;continue;case Q.CDATA:"]"===e?c.state=Q.CDATA_ENDING:c.cdata+=e;continue;case Q.CDATA_ENDING:"]"===e?c.state=Q.CDATA_ENDING_2:(c.cdata+="]"+e,c.state=Q.CDATA);continue;case Q.CDATA_ENDING_2:">"===e?(c.cdata&&l(c,"oncdata",c.cdata),l(c,"onclosecdata"),c.cdata="",c.state=Q.TEXT):"]"===e?c.cdata+="]":(c.cdata+="]]"+e,c.state=Q.CDATA);continue;case Q.PROC_INST:"?"===e?c.state=Q.PROC_INST_ENDING:i(D,e)?c.state=Q.PROC_INST_BODY:c.procInstName+=e;continue;case Q.PROC_INST_BODY:if(!c.procInstBody&&i(D,e))continue;"?"===e?c.state=Q.PROC_INST_ENDING:c.procInstBody+=e;continue;case Q.PROC_INST_ENDING:">"===e?(l(c,"onprocessinginstruction",{name:c.procInstName,body:c.procInstBody}),c.procInstName=c.procInstBody="",c.state=Q.TEXT):(c.procInstBody+="?"+e,c.state=Q.PROC_INST_BODY);continue;case Q.OPEN_TAG:i(P,e)?c.tagName+=e:(r(c),">"===e?u(c):"/"===e?c.state=Q.OPEN_TAG_SLASH:(j(D,e)&&q(c,"Invalid character in tag name"),c.state=Q.ATTRIB));continue;case Q.OPEN_TAG_SLASH:">"===e?(u(c,!0),v(c)):(q(c,"Forward-slash in opening tag not followed by >"),c.state=Q.ATTRIB);continue;case Q.ATTRIB:if(i(D,e))continue;">"===e?u(c):"/"===e?c.state=Q.OPEN_TAG_SLASH:i(O,e)?(c.attribName=e,c.attribValue="",c.state=Q.ATTRIB_NAME):q(c,"Invalid attribute name");continue;case Q.ATTRIB_NAME:"="===e?c.state=Q.ATTRIB_VALUE:">"===e?(q(c,"Attribute without value"),c.attribValue=c.attribName,t(c),u(c)):i(D,e)?c.state=Q.ATTRIB_NAME_SAW_WHITE:i(P,e)?c.attribName+=e:q(c,"Invalid attribute name");continue;case Q.ATTRIB_NAME_SAW_WHITE:if("="===e)c.state=Q.ATTRIB_VALUE;else{if(i(D,e))continue;q(c,"Attribute without value"),c.tag.attributes[c.attribName]="",c.attribValue="",l(c,"onattribute",{name:c.attribName,value:""}),c.attribName="",">"===e?u(c):i(O,e)?(c.attribName=e,c.state=Q.ATTRIB_NAME):(q(c,"Invalid attribute name"),c.state=Q.ATTRIB)}continue;case Q.ATTRIB_VALUE:if(i(D,e))continue;i(G,e)?(c.q=e,c.state=Q.ATTRIB_VALUE_QUOTED):(q(c,"Unquoted attribute value"),c.state=Q.ATTRIB_VALUE_UNQUOTED,c.attribValue=e);continue;case Q.ATTRIB_VALUE_QUOTED:if(e!==c.q){"&"===e?c.state=Q.ATTRIB_VALUE_ENTITY_Q:c.attribValue+=e;continue}t(c),c.q="",c.state=Q.ATTRIB_VALUE_CLOSED;continue;case Q.ATTRIB_VALUE_CLOSED:i(D,e)?c.state=Q.ATTRIB:">"===e?u(c):"/"===e?c.state=Q.OPEN_TAG_SLASH:i(O,e)?(q(c,"No whitespace between attributes"),c.attribName=e,c.attribValue="",c.state=Q.ATTRIB_NAME):q(c,"Invalid attribute name");continue;case Q.ATTRIB_VALUE_UNQUOTED:if(j(I,e)){"&"===e?c.state=Q.ATTRIB_VALUE_ENTITY_U:c.attribValue+=e;continue}t(c),">"===e?u(c):c.state=Q.ATTRIB;continue;case Q.CLOSE_TAG:if(c.tagName)">"===e?v(c):i(P,e)?c.tagName+=e:c.script?(c.script+="</"+c.tagName,c.tagName="",c.state=Q.SCRIPT):(j(D,e)&&q(c,"Invalid tagname in closing tag"),c.state=Q.CLOSE_TAG_SAW_WHITE);else{if(i(D,e))continue;j(O,e)?c.script?(c.script+="</"+e,c.state=Q.SCRIPT):q(c,"Invalid tagname in closing tag."):c.tagName=e}continue;case Q.CLOSE_TAG_SAW_WHITE:if(i(D,e))continue;">"===e?v(c):q(c,"Invalid characters in closing tag");continue;case Q.TEXT_ENTITY:case Q.ATTRIB_VALUE_ENTITY_Q:case Q.ATTRIB_VALUE_ENTITY_U:switch(c.state){case Q.TEXT_ENTITY:var h=Q.TEXT,k="textNode";break;case Q.ATTRIB_VALUE_ENTITY_Q:var h=Q.ATTRIB_VALUE_QUOTED,k="attribValue";break;case Q.ATTRIB_VALUE_ENTITY_U:var h=Q.ATTRIB_VALUE_UNQUOTED,k="attribValue"}";"===e?(c[k]+=w(c),c.entity="",c.state=h):i(H,e)?c.entity+=e:(q(c,"Invalid character entity"),c[k]+="&"+c.entity+e,c.entity="",c.state=h);continue;default:throw new Error(c,"Unknown state: "+c.state)}return c.position>=c.bufferCheckPosition&&b(c),c}var y=function(){};y.parser=function(b,c){return new a(b,c)},y.SAXParser=a,y.SAXStream=f,y.createStream=e,y.MAX_BUFFER_LENGTH=65536;var z=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];y.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(a){function b(){this.__proto__=a}return b.prototype=a,new b}),Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__}),Object.keys||(Object.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}),a.prototype={end:function(){p(this)},write:x,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){d(this)}};try{var A=require("stream").Stream}catch(B){var A=function(){}}var C=y.EVENTS.filter(function(a){return"error"!==a&&"end"!==a});f.prototype=Object.create(A.prototype,{constructor:{value:f}}),f.prototype.write=function(a){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(a)){if(!this._decoder){var b=require("string_decoder").StringDecoder;this._decoder=new b("utf8")}a=this._decoder.write(a)}return this._parser.write(a.toString()),this.emit("data",a),!0},f.prototype.end=function(a){return a&&a.length&&this.write(a),this._parser.end(),!0},f.prototype.on=function(a,b){var c=this;return c._parser["on"+a]||-1===C.indexOf(a)||(c._parser["on"+a]=function(){var b=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);b.splice(0,0,a),c.emit.apply(c,b)}),A.prototype.on.call(c,a,b)};var D="\r\n	 ",E="0124356789",F="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",G="'\"",H=E+F+"#",I=D+">",J="[CDATA[",K="DOCTYPE",L="http://www.w3.org/XML/1998/namespace",M="http://www.w3.org/2000/xmlns/",N={xml:L,xmlns:M};D=g(D),E=g(E),F=g(F);var O=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,P=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;G=g(G),H=g(H),I=g(I);var Q=0;y.STATE={BEGIN:Q++,TEXT:Q++,TEXT_ENTITY:Q++,OPEN_WAKA:Q++,SGML_DECL:Q++,SGML_DECL_QUOTED:Q++,DOCTYPE:Q++,DOCTYPE_QUOTED:Q++,DOCTYPE_DTD:Q++,DOCTYPE_DTD_QUOTED:Q++,COMMENT_STARTING:Q++,COMMENT:Q++,COMMENT_ENDING:Q++,COMMENT_ENDED:Q++,CDATA:Q++,CDATA_ENDING:Q++,CDATA_ENDING_2:Q++,PROC_INST:Q++,PROC_INST_BODY:Q++,PROC_INST_ENDING:Q++,OPEN_TAG:Q++,OPEN_TAG_SLASH:Q++,ATTRIB:Q++,ATTRIB_NAME:Q++,ATTRIB_NAME_SAW_WHITE:Q++,ATTRIB_VALUE:Q++,ATTRIB_VALUE_QUOTED:Q++,ATTRIB_VALUE_CLOSED:Q++,ATTRIB_VALUE_UNQUOTED:Q++,ATTRIB_VALUE_ENTITY_Q:Q++,ATTRIB_VALUE_ENTITY_U:Q++,CLOSE_TAG:Q++,CLOSE_TAG_SAW_WHITE:Q++,SCRIPT:Q++,SCRIPT_ENDING:Q++},y.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(y.ENTITIES).forEach(function(a){var b=y.ENTITIES[a],c="number"==typeof b?String.fromCharCode(b):b;y.ENTITIES[a]=c});for(var Q in y.STATE)y.STATE[y.STATE[Q]]=Q;return Q=y.STATE,String.fromCodePoint||!function(){var a=String.fromCharCode,b=Math.floor,c=function(){var c,d,e=16384,f=[],g=-1,h=arguments.length;if(!h)return"";for(var i="";++g<h;){var j=Number(arguments[g]);if(!isFinite(j)||0>j||j>1114111||b(j)!==j)throw RangeError("Invalid code point: "+j);65535>=j?f.push(j):(j-=65536,c=(j>>10)+55296,d=j%1024+56320,f.push(c,d)),(g+1===h||f.length>e)&&(i+=a.apply(null,f),f.length=0)}return i};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:c,configurable:!0,writable:!0}):String.fromCodePoint=c}(),y}();a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,b.prototype={item:function(a){return a<this.length?this.nodes[a]:void 0}},b.prototype=Object.create(b.prototype),b.prototype.constructor=b,Object.defineProperty(b.prototype,"length",{get:function(){return this.nodes.length}}),c.prototype={getNamedItem:function(a){for(var b=null,c=0;c<this.nodes.length;c+=1)this.nodes[c].nodeName===a&&(b=this.nodes[c]);return b},setNamedItem:function(a){a.ownerDocument===this.ownerDocument&&(a=null)},removeNamedItem:function(a){a=null},item:function(a){a=null},getNamedItemNS:function(a,b){a=b=null},setNamedItemNS:function(a){a=null},removeNamedItemNS:function(a,b){a=b=null}},c.prototype=Object.create(c.prototype),c.prototype.constructor=c,Object.defineProperty(c.prototype,"length",{get:function(){return this.length}}),d.prototype={insertBefore:function(a,b){a=b=null},replaceChild:function(a,b){a=b=null},removeChild:function(a){a=null},appendChild:function(a){a=null},hasChildNodes:function(){},cloneNode:function(a){a=null},normalize:function(){},isSupported:function(a,b){a=b=null},hasAttributes:function(){}},e.prototype=Object.create(e.prototype),e.prototype.constructor=e,Object.defineProperty(e.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.value}}),f.prototype=Object.create(f.prototype),f.prototype.constructor=f,Object.defineProperty(f.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(f.prototype,"nodeValue",{get:function(){return this.data}}),g.prototype=Object.create(g.prototype),g.prototype.constructor=g,Object.defineProperty(g.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(g.prototype,"nodeValue",{get:function(){return this.data}}),h.prototype=Object.create(h.prototype),h.prototype.constructor=h,Object.defineProperty(h.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(h.prototype,"nodeValue",{get:function(){return this.data}}),i.prototype=Object.create(i.prototype),i.prototype.constructor=i,Object.defineProperty(i.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(i.prototype,"nodeValue",{get:function(){return this.data}}),j.prototype={_opentag:function(a){var b=new j(a);b.parentNode=this,this.children.push(b),null===this.firstChild&&(this.firstChild=b),this.lastChild=b,o.unshift(b)},_closetag:function(){o.shift()},_text:function(a){if(a&&/[^\s]/.test(a)){var b=new g(a,this);this.children.push(b),null===this.firstChild&&(this.firstChild=b),this.lastChild=b}},_comment:function(a){if(a){var b=new f(a,this);this.children.push(b),null===this.firstChild&&(this.firstChild=b),this.lastChild=b}},_processingInstruction:function(a){if(a){var b=new i(a,this);this.children.push(b),null===this.firstChild&&(this.firstChild=b),this.lastChild=b}},_cdata:function(a){if(a){var b=new h(a,this);this.children.push(b),null===this.firstChild&&(this.firstChild=b),this.lastChild=b}},getElementsByTagName:function(a){for(var b,c=[],d=0;d<this.children.length;d+=1)(this.children[d].name===a||"*"===a)&&c.push(this.children[d]),this.children[d].children&&this.children[d].children.length>0&&(b=this.children[d].getElementsByTagName(a))&&(c=c.concat(b));return c},getElementsByName:function(a){for(var b,c=[],d=0;d<this.children.length;d+=1)(a&&this.children[d].attr.name===a||!a&&this.children[d].attr.name)&&c.push(this.children[d]),this.children[d].children&&this.children[d].children.length>0&&(b=this.children[d].getElementsByName(a))&&(c=c.concat(b));return c},hasAttribute:function(a){return this.attr[a]?!0:!1},hasAttributes:function(){var a=0;for(var b in this.attr)if(this.attr.hasOwnProperty(b)){a+=1;break}return a>0?!0:!1},getAttribute:function(a){return this.attr[a]?this.attr[a].value:null},removeAttribute:function(a){this.attr[a]&&delete this.attr[a]},setAttribute:function(a,b){this.attr[a].value=b},createElement:function(a){return new j({name:a,ownerDocument:this,parentNode:null})},hasChildNodes:function(){return this.children.length>0?!0:!1},appendChild:function(a){a instanceof j&&(this.children.push(a),this.firstChild=this.children[0],this.lastChild=this.children[this.children.length])},previousSibling:function(){if(null!==this.parentNode&&this.parentNode.children.length>1)for(var a=0;a<this.parentNode.children.length;a+=1)if(this.parentNode.children[a]===this&&0!==a)return this.parentNode.children[a-1];return null},nextSibling:function(){if(null!==this.parentNode&&this.parentNode.children.length>1)for(var a=0;a<this.parentNode.children.length;a+=1)if(this.parentNode.children[a]===this&&a+1<this.parentNode.children.length)return this.parentNode.children[a+1];return null},getAttributeNode:function(a){return this.hasAttribute(a)?new e(a,this.getAttribute(a),this):null},createAttribute:function(a,b){if(/^[a-zA-Z_:][a-zA-Z0-9\.\-_:]*$/.test(a))return new e(a,b,this);throw new Error("INVALID_CHARACTER_ERR")},setAttributeNode:function(a){if(a instanceof e){if(a.ownerElement!==this)throw new Error("INUSE_ATTRIBUTE_ERR");if(a.ownerElement.ownerDocument!==this.ownerDocument)throw new Error("WRONG_DOCUMENT_ERR");this.setAttribute(a.name,a.value)}},removeAttributeNode:function(a){if(a instanceof e){if(this.hasAttribute(a.name)){var b=this.getAttributeNode(a.name);return this.removeAttribute(a.name),b}throw new Error("NOT_FOUND_ERR")}},insertBefore:function(a){a=null}},j.prototype=Object.create(j.prototype),j.prototype.constructor=j,Object.defineProperty(j.prototype,"nodeName",{get:function(){return this.name},set:function(a){this.name=a}}),Object.defineProperty(j.prototype,"nodeValue",{get:function(){return this.val},set:function(a){this.val=a}}),Object.defineProperty(j.prototype,"childNodes",{get:function(){return this.children}}),Object.defineProperty(j.prototype,"attributes",{get:function(){return this.attr}}),Object.defineProperty(j.prototype,"tagName",{get:function(){return this.name},set:function(a){this.name=a}}),k.prototype=Object.create(k.prototype),k.prototype.constructor=k,l.prototype={createDocument:function(){return new m},hasFeature:function(a,b){return null!==a&&null!==b?!0:void 0}},l.prototype=Object.create(l.prototype),l.prototype.constructor=l,m.prototype={_opentag:function(a){"undefined"==typeof this.documentElement?(this.ownerDocument=null,this.name="#document",this.nodeType=9,this.val=null,this.documentElement=new j(a),this.firstChild=this.documentElement,this.lastChild=this.documentElement,this.parentNode=null):(a.ownerDocument=this,j.prototype._opentag.apply(this.documentElement,arguments))},_closetag:function(){o.shift(),this.children=[this.documentElement]},_text:function(a){j.prototype._text.apply(this.documentElement,a)},_processingInstruction:function(a){j.prototype._processingInstruction.apply(this.documentElement,a)},_comment:function(a){j.prototype._comment.apply(this.documentElement,a)},_cdata:function(a){j.prototype._cdata.apply(this.documentElement,a)},getElementsByTagName:function(a){for(var b,c=[],d=0;d<this.children.length;d+=1)(this.children[d].name===a||"*"===a)&&c.push(this.children[d]),this.children[d].children&&this.children[d].children.length>0&&(b=this.children[d].getElementsByTagName(a))&&(c=c.concat(b));return c},getElementsByName:function(a){for(var b,c=[],d=0;d<this.children.length;d+=1)(a&&this.children[d].attr.name===a||!a&&this.children[d].attr.name)&&c.push(this.children[d]),this.children[d].children&&this.children[d].children.length>0&&(b=this.children[d].getElementsByName(a))&&(c=c.concat(b));return c},createElement:function(a){return new j({name:a,ownerDocument:this,parentNode:null})},hasChildNodes:function(){return this.children.length>0?!0:!1},appendChild:function(a){a instanceof j&&(a.parentNode=this,this.children.push(a),this.firstChild=this.children[0],this.lastChild=this.children[this.children.length])},createTextNode:function(a){return new g(a,this)},createComment:function(a){return new f(a,this)},createCDATASection:function(a){return new h(a,this)},createProcessingInstruction:function(a,b){return new i(a,b,this)},createDocumentFragment:function(){return new n}},m.prototype=Object.create(m.prototype),m.prototype.constructor=m,Object.defineProperty(m.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(m.prototype,"nodeValue",{get:function(){return null}}),Object.defineProperty(m.prototype,"childNodes",{get:function(){return this.children}}),Object.defineProperty(m.prototype,"tagName",{get:function(){return this.name},set:function(a){this.name=a}}),n.prototype=Object.create(n.prototype),n.prototype.constructor=m,Object.defineProperty(n.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(n.prototype,"nodeValue",{get:function(){return null}}),this.parseFromString=function(a,b){return"text/xml"===b||"application/xml"===b?new m(a):void 0}};return a.prototype.parseFromString=function(a,b){return"text/xml"===b||"application/xml"===b?this.parseFromString(a,b):void 0},a}),navigator.isCocoonJS&&(window.DOMParser=domParser);
//# sourceMappingURL=xml-for-cocoonjs.map